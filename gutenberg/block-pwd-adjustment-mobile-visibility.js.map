{"version":3,"file":"block-pwd-adjustment-mobile-visibility.js","mappings":"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","sources":["webpack://builder/./node_modules/classnames/index.js","webpack://builder/webpack/bootstrap","webpack://builder/webpack/runtime/compat get default export","webpack://builder/webpack/runtime/define property getters","webpack://builder/webpack/runtime/hasOwnProperty shorthand","webpack://builder/webpack/runtime/make namespace object","webpack://builder/./src/block-pwd-adjustment-mobile-visibility.js"],"sourcesContent":["/*!\n\tCopyright (c) 2018 Jed Watson.\n\tLicensed under the MIT License (MIT), see\n\thttp://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\tvar nativeCodeString = '[native code]';\n\n\tfunction classNames() {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(arg);\n\t\t\t} else if (Array.isArray(arg)) {\n\t\t\t\tif (arg.length) {\n\t\t\t\t\tvar inner = classNames.apply(null, arg);\n\t\t\t\t\tif (inner) {\n\t\t\t\t\t\tclasses.push(inner);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tif (arg.toString !== Object.prototype.toString && !arg.toString.toString().includes('[native code]')) {\n\t\t\t\t\tclasses.push(arg.toString());\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tfor (var key in arg) {\n\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/**\r\n * External Dependencies\r\n */\r\nimport classnames from 'classnames'; //npm install classnames --save\r\n\r\n/* https://jeffreycarandang.com/extending-gutenberg-core-blocks-with-custom-attributes-and-controls/ */\r\n\r\n/**\r\n * WordPress Dependencies\r\n */\r\nconst { __ } = wp.i18n;\r\nconst { addFilter } = wp.hooks;\r\nconst { Fragment }\t= wp.element;\r\nconst { InspectorAdvancedControls }\t= wp.blockEditor;\r\nconst { createHigherOrderComponent } = wp.compose;\r\nconst { ToggleControl } = wp.components;\r\n\r\n//restrict to specific block names\r\nconst allowedBlocks = [ 'core/columns', 'core/column' ];\r\n\r\n/**\r\n * Add custom attribute for mobile visibility.\r\n *\r\n * @param {Object} settings Settings for the block.\r\n *\r\n * @return {Object} settings Modified settings.\r\n */\r\nfunction addAttributes( settings ) {\r\n\r\n\t//check if object exists for old Gutenberg version compatibility\r\n\t//add allowedBlocks restriction\r\n\tif( typeof settings.attributes !== 'undefined' && allowedBlocks.includes( settings.name ) ){\r\n\r\n\t\tsettings.attributes = Object.assign( settings.attributes, {\r\n\t\t\tvisibleOnMobile:{\r\n\t\t\t\ttype: 'boolean',\r\n\t\t\t\tdefault: true,\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t}\r\n\r\n\treturn settings;\r\n}\r\n\r\n/**\r\n * Add mobile visibility controls on Advanced Block Panel.\r\n *\r\n * @param {function} BlockEdit Block edit component.\r\n *\r\n * @return {function} BlockEdit Modified block edit component.\r\n */\r\nconst withAdvancedControls = createHigherOrderComponent( ( BlockEdit ) => {\r\n\treturn ( props ) => {\r\n\r\n\t\tconst {\r\n\t\t\tname,\r\n\t\t\tattributes,\r\n\t\t\tsetAttributes,\r\n\t\t\tisSelected,\r\n\t\t} = props;\r\n\r\n\t\tconst {\r\n\t\t\tvisibleOnMobile,\r\n\t\t} = attributes;\r\n\r\n\r\n\t\treturn (\r\n\t\t\t<Fragment>\r\n\t\t\t\t<BlockEdit {...props} />\r\n\t\t\t\t{ isSelected && allowedBlocks.includes( name ) &&\r\n\t\t\t\t\t<InspectorAdvancedControls>\r\n\t\t\t\t\t\t<ToggleControl\r\n\t\t\t\t\t\t\tlabel={ __( 'Mobile Devices Visibity' ) }\r\n\t\t\t\t\t\t\tchecked={ !! visibleOnMobile }\r\n\t\t\t\t\t\t\tonChange={ () => setAttributes( {  visibleOnMobile: ! visibleOnMobile } ) }\r\n\t\t\t\t\t\t\thelp={ !! visibleOnMobile ? __( 'Showing on mobile devices.' ) : __( 'Hidden on mobile devices.' ) }\r\n\t\t\t\t\t\t\t__nextHasNoMarginBottom={ true }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</InspectorAdvancedControls>\r\n\t\t\t\t}\r\n\r\n\t\t\t</Fragment>\r\n\t\t);\r\n\t};\r\n}, 'withAdvancedControls');\r\n\r\n/**\r\n * Add custom element class in save element.\r\n *\r\n * @param {Object} extraProps     Block element.\r\n * @param {Object} blockType      Blocks object.\r\n * @param {Object} attributes     Blocks attributes.\r\n *\r\n * @return {Object} extraProps Modified block element.\r\n */\r\nfunction applyExtraClass( extraProps, blockType, attributes ) {\r\n\r\n\tconst { visibleOnMobile } = attributes;\r\n\r\n\t//check if attribute exists for old Gutenberg version compatibility\r\n\t//add class only when visibleOnMobile = false\r\n\t//add allowedBlocks restriction\r\n\tif ( typeof visibleOnMobile !== 'undefined' && !visibleOnMobile && allowedBlocks.includes( blockType.name ) ) {\r\n\t\textraProps.className = classnames( extraProps.className, 'mobile-hide' );\r\n\t}\r\n\r\n\treturn extraProps;\r\n}\r\n\r\n//add filters\r\n\r\naddFilter(\r\n\t'blocks.registerBlockType',\r\n\t'pwd-blocks/custom-attributes',\r\n\taddAttributes\r\n);\r\n\r\naddFilter(\r\n\t'editor.BlockEdit',\r\n\t'pwd-blocks/custom-advanced-control',\r\n\twithAdvancedControls\r\n);\r\n\r\naddFilter(\r\n\t'blocks.getSaveContent.extraProps',\r\n\t'pwd-blocks/applyExtraClass',\r\n\tapplyExtraClass\r\n);"],"names":["classnames","__","wp","i18n","addFilter","hooks","Fragment","element","InspectorAdvancedControls","blockEditor","createHigherOrderComponent","compose","ToggleControl","components","allowedBlocks","addAttributes","settings","attributes","includes","name","Object","assign","visibleOnMobile","type","withAdvancedControls","BlockEdit","props","setAttributes","isSelected","React","createElement","label","checked","onChange","help","__nextHasNoMarginBottom","applyExtraClass","extraProps","blockType","className"],"sourceRoot":""}